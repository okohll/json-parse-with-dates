# json-parse-with-dates
A clone of Douglas Crockford's JSON parser with added JavaScript date support

Provides the function json_parse_with_dates(text, reviver)

The starting point is the recursive descent JSON parser here:

https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js

This has been edited to deal with dates as a data type, when represented as a JavaScript Date.UTC object. So for example this string which is invalid JSON

    {
      "string": "hello",
      "date": Date.UTC(2018,7,1,18,26),
      "dates": [Date.UTC(2018,7,1), Date.UTC(2018,7,2), Date.UTC(2018,7,3)],
      "nested dates": [[Date.UTC(2018,7,1),5], [Date.UTC(2018,7,2),4], [Date.UTC(2018,7,3)],6]
    }
    
will be parsed.

Why?
====

There are many reasons why this is a bad idea. To quote https://weblogs.asp.net/bleroy/dates-and-json,

"This is a (very) bad idea for a number of reasons. First, it simply does not conform to the JSON specs. Second, any JSON parser that validates its input before parsing it will cough on such a thing. Finally, it establishes a precedent: why would it be allowed for dates and not for arbitrary types? This would just defeat the purpose of JSON."

However, it works for my particular need, where I control both the JSON generated by the server and the parsing of it by the client in the browser. If dates are simple property values of an object, then you can use a 'reviver' function https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse but in my particular case, dates are embedded within arrays and that doesn't work.

Alternatives
============

Since writing this I've since found an alternative with a similar aim: https://github.com/RickStrahl/json.date-extensions

That library is fuller featured and deals with a larger number of date formats. It's probably a better one to use.

Thanks
======

Douglas Crockford would no doubt not appreciate this mis-use, but what a great thing that not one but three versions of the parser are published at https://github.com/douglascrockford/JSON-js for anyone to use as they like!
